(function(c){var a=c.telerik;function b(e){var f=e?e.toLowerCase():"";return f&&f.indexOf("http")!==0&&f.indexOf("https")!==0}function d(e){if(c.browser.msie&&c.browser.version<7){e.find(".t-resize-e,.t-resize-w").css("height",e.height()).end().find(".t-resize-n,.t-resize-s").css("width",e.width()).end().find(".t-overlay").css({width:e.width(),height:e.height()})}}a.fx.zoom=function(e){this.element=e};a.fx.zoom.prototype={play:function(g,f){var e=this.element.show();var h=e.find("> .t-window-content");var i={width:h.width(),height:h.height(),left:parseInt(e.css("left")),top:parseInt(e.css("top"))};e.css({left:i.left+20,top:i.top+20}).animate({left:i.left,top:i.top},g.openDuration);h.css({width:i.width-40,height:i.height-40}).animate({width:i.width,height:i.height},g.openDuration)},rewind:function(g,f){var e=this.element;var h=e.find("> .t-window-content");var i={width:h.width(),height:h.height(),left:parseInt(e.css("left")),top:parseInt(e.css("top"))};h.animate({width:i.width-40,height:i.height-40},g.closeDuration);e.animate({left:i.left+20,top:i.top+20},g.closeDuration,function(){e.css({left:i.left,top:i.top}).hide();h.css({width:i.width,height:i.height});if(f){f()}})}};a.fx.zoom.defaults=function(){return{list:[{name:"zoom"}],openDuration:"fast",closeDuration:"fast"}};a.window=function(g,h){this.element=g;var e=c(g);if(!e.is(".t-window")){e.addClass("t-widget t-window");a.window.create(g,h)}c.extend(this,h);var f=".t-window-titlebar .t-window-action";e.delegate(".t-window-titlebar","dblclick",c.proxy(this.toggleMaximization,this)).delegate(f,"mouseenter",a.hover).delegate(f,"mouseleave",a.leave).delegate(f,"click",c.proxy(this.windowActionHandler,this));if(this.resizable){e.append(a.window.getResizeHandlesHtml());d(e);a.draganddrop(this.element.id+"Resize",c.extend({draggables:e.find(".t-resize-handle"),hitTestOffset:0},a.draganddrop.applyContext(a.draganddrop.windowResize,this)))}if(this.draggable){a.draganddrop(this.element.id+"Move",c.extend({draggables:e.find(".t-window-titlebar")},a.draganddrop.applyContext(a.draganddrop.windowMove,this)))}a.bind(this,{open:this.onOpen,close:this.onClose,refresh:this.onRefresh,resize:this.onResize,error:this.onError,load:this.onLoad,move:this.onMove});if(!e.parent().is("body")){e.css(e.offset()).appendTo(document.body)}if(this.modal&&c("body > .t-overlay").length==0){this.overlay(e.is(":visible"))}c(window).resize(c.proxy(this.onDocumentResize,this));if(b(this.contentUrl)){this.ajaxRequest()}};a.window.prototype={overlay:function(e){var g=c("body > .t-overlay");if(g.length==0){g=c('<div class="t-overlay" />').toggle(e).appendTo(this.element.ownerDocument.body)}var f=c(document);if(c.browser.msie&&c.browser.version<7){g.css({width:f.width()-21,height:f.height(),position:"absolute"})}return g},windowActionHandler:function(h){var f=c(h.target).closest(".t-window-action").find(".t-icon");var g=this;c.each({"t-close":this.close,"t-maximize":this.maximize,"t-restore":this.restore,"t-refresh":this.refresh},function(e,i){if(f.hasClass(e)){h.preventDefault();i.call(g);return false}})},center:function(){var f=c(this.element);var e=c(window);f.css({left:(e.width()-f.width())/2,top:(e.height()-f.height())/2});return this},title:function(f){var e=c(".t-window-titlebar > .t-window-title",this.element);if(!f){return e.text()}e.text(f);return this},content:function(e){var f=c("> .t-window-content",this.element);if(!e){return f.html()}f.html(e);return this},open:function(g){var f=c(this.element);if(!f.is(":visible")){if(!a.trigger(this.element,"open")){if(this.modal){var h=this.overlay(false);if(this.effects.list.length>0&&this.effects.list[0].name!="toggle"){h.css("opacity",0).show().animate({opacity:0.5},this.effects.openDuration)}else{h.css("opacity",0.5).show()}}a.fx.play(this.effects,f)}}return this},close:function(g){var f=c(this.element);if(f.is(":visible")){if(!a.trigger(this.element,"close")){var h=this.modal?this.overlay(true):c(undefined);h.animate({opacity:0},this.effects.closeDuration);a.fx.rewind(this.effects,f,null,function(){h.add(f[0]).hide()})}}if(this.isMaximized){c("html, body").css("overflow","")}return this},toggleMaximization:function(f){if(f&&c(f.target).closest(".t-window-action").length>0){return}this[this.isMaximized?"restore":"maximize"]()},restore:function(){if(!this.isMaximized){return}c(this.element).css({position:"absolute",left:this.restorationSettings.left,top:this.restorationSettings.top}).find("> .t-window-content").css({width:this.restorationSettings.width,height:this.restorationSettings.height}).end().find(".t-resize-handle").show().end().find(".t-window-titlebar .t-restore").addClass("t-maximize").removeClass("t-restore");c("html, body").css("overflow","");this.isMaximized=false;a.trigger(this.element,"resize");return this},maximize:function(h){if(this.isMaximized){return}var f=c(this.element);var g=f.find("> .t-window-content");this.restorationSettings={left:f.position().left,top:f.position().top,width:g.width(),height:g.height()};f.css({left:0,top:0,position:"fixed"}).find(".t-resize-handle").hide().end().find(".t-window-titlebar .t-maximize").addClass("t-restore").removeClass("t-maximize");c("html, body").css("overflow","hidden");this.isMaximized=true;this.onDocumentResize();return this},onDocumentResize:function(){if(!this.isMaximized){return}var e=c(this.element);var f=e.find("> .t-window-content");f.css({width:c(window).width()-(f.outerWidth()-f.width()+e.outerWidth()-e.width()),height:c(window).height()-(f.outerHeight()-f.height()+e.outerHeight()-e.height()+e.find("> .t-window-titlebar").outerHeight())});d(e);a.trigger(e,"resize")},refresh:function(){if(b(this.contentUrl)){this.ajaxRequest()}return this},ajaxRequest:function(e){var f=setTimeout(function(){c(".t-refresh",this.element).addClass("t-loading")},100);var g={};c.ajax({type:"GET",url:e||this.contentUrl,dataType:"html",data:g,error:c.proxy(function(i,h){if(a.ajaxError(this.element,"error",i,h)){return}},this),complete:function(){clearTimeout(f);c(".t-refresh",this.element).removeClass("t-loading")},success:c.proxy(function(i,h){c(".t-window-content",this.element).html(i);a.trigger(this.element,"refresh")},this)})},destroy:function(){c(this.element).remove();if(this.modal){this.overlay(false).remove()}}};c.extend(a.draganddrop,{windowMove:{shouldDrag:function(e){return !this.isMaximized&&e.closest(".t-window-action").length==0},onDragStart:function(g,f){this.initialWindowPosition=c(this.element).position();this.startPosition={left:g.pageX-this.initialWindowPosition.left,top:g.pageY-this.initialWindowPosition.top};c(".t-resize-handle",this.element).hide();c('<div class="t-overlay" />').appendTo(this.element);c(document.body).css("cursor",f.css("cursor"))},onDragMove:function(g){var f={left:g.pageX-this.startPosition.left,top:Math.max(g.pageY-this.startPosition.top,0)};c(this.element).css(f)},onDragCancelled:function(g,f){c(this.element).find(".t-resize-handle").show().end().find(".t-overlay").remove();c(document.body).css("cursor","");f.closest(".t-window").css(this.initialWindowPosition)},onDrop:function(h,f,g){c(this.element).find(".t-resize-handle").show().end().find(".t-overlay").remove();c(document.body).css("cursor","");return true}},windowResize:{shouldDrag:function(e){return true},onDragStart:function(h,f){var g=c(this.element);this.initialCursorPosition=g.offset();this.resizeDirection=f[0].className.replace("t-resize-handle t-resize-","").split("");this.resizeElement=g.find("> .t-window-content");this.initialSize={width:this.resizeElement.width(),height:this.resizeElement.height()};this.outlineSize={left:this.resizeElement.outerWidth()-this.resizeElement.width()+g.outerWidth()-g.width(),top:this.resizeElement.outerHeight()-this.resizeElement.height()+g.outerHeight()-g.height()+g.find("> .t-window-titlebar").outerHeight()};c('<div class="t-overlay" />').appendTo(this.element);g.find(".t-resize-handle").not(f).hide();c(document.body).css("cursor",f.css("cursor"))},onDragMove:function(h,f){var g=c(this.element);var i={e:function(){var e=h.pageX-this.initialCursorPosition.left-this.outlineSize.left;this.resizeElement.width((e<this.minWidth?this.minWidth:(this.maxWidth&&e>this.maxWidth)?this.maxWidth:e))},s:function(){var e=h.pageY-this.initialCursorPosition.top-this.outlineSize.top;this.resizeElement.height((e<this.minHeight?this.minHeight:(this.maxHeight&&e>this.maxHeight)?this.maxHeight:e))},w:function(){var j=this.initialCursorPosition.left+this.initialSize.width;g.css("left",h.pageX>(j-this.minWidth)?j-this.minWidth:h.pageX<(j-this.maxWidth)?j-this.maxWidth:h.pageX);var e=j-h.pageX;this.resizeElement.width((e<this.minWidth?this.minWidth:(this.maxWidth&&e>this.maxWidth)?this.maxWidth:e))},n:function(){var e=this.initialCursorPosition.top+this.initialSize.height;g.css("top",h.pageY>(e-this.minHeight)?e-this.minHeight:h.pageY<(e-this.maxHeight)?e-this.maxHeight:h.pageY);var j=e-h.pageY;this.resizeElement.height((j<this.minHeight?this.minHeight:(this.maxHeight&&j>this.maxHeight)?this.maxHeight:j))}};c.each(this.resizeDirection,c.proxy(function(j,e){i[e].call(this)},this));d(g);a.trigger(this.element,"resize")},onDragCancelled:function(h,f){var g=c(this.element);g.find(".t-overlay").remove().end().find(".t-resize-handle").not(f).show();d(g);c(document.body).css("cursor","");this.resizeElement.css(this.initialSize)},onDrop:function(h,f,g){c(this.element).find(".t-overlay").remove().end().find(".t-resize-handle").not(f).show();c(document.body).css("cursor","");return true}}});c.extend(a.window,{create:function(e,f){if(!e.nodeType){f=e;e=null}else{f.html=e.innerHTML}f=c.extend({title:"",html:"",actions:["Close"]},f);var g=new a.stringBuilder().catIf('<div class="t-widget t-window">',!e).cat('<div class="t-window-titlebar t-header">').cat('&nbsp;<span class="t-window-title">').cat(f.title).cat("</span>").cat('<div class="t-window-actions t-header">');c.map(f.actions,function(h){g.cat('<a href="#" class="t-window-action t-link">').cat('<span class="t-icon t-').cat(h.toLowerCase()).cat('">').cat(h).cat("</span></a>")});g.cat("</div></div>").cat('<div class="t-window-content t-content" style="');if(f.width){g.cat("width:").cat(f.width).cat("px;")}if(f.height){g.cat("height:").cat(f.height).cat("px;")}g.cat('">').cat(f.html).cat("</div>").catIf("</div>",!e);if(e){c(e).html(g.string())}else{return c(g.string()).tWindow(f)}},getResizeHandlesHtml:function(){var e=new a.stringBuilder();c.each("n e s w se sw ne nw".split(" "),function(f,g){e.cat('<div class="t-resize-handle t-resize-').cat(g).cat('"></div>')});return e.string()}});c.fn.tWindow=function(e){return a.create(this,{name:"tWindow",init:function(f,g){return new a.window(f,g)},options:e})};c.fn.tWindow.defaults={effects:{list:[{name:"zoom"},{name:"property",properties:["opacity"]}],openDuration:"fast",closeDuration:"fast"},modal:false,resizable:true,draggable:true,minWidth:50,minHeight:50}})(jQuery);