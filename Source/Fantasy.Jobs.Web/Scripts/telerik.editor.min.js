(function(H){var r=H.telerik;function j(aW){var aY={};for(var aX=0;aX<aW.length;aX++){aY[aW[aX]]=true}return aY}var g=j("area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed".split(","));var aD="div,p,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,pre,script,table,tbody,td,tfoot,th,thead,tr,ul".split(",");var V=j(aD);var n=j("a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var".split(","));var c=j("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected".split(","));function u(aW){if(aW.nodeType==1){aW.normalize()}}function S(aX){var aW=0;while(aX=aX.previousSibling){aW++}return aW}function aT(aW){return aW&&aW.nodeValue!==null&&aW.data!==null}function ap(aW,aY){try{return !aT(aW)&&(H.contains(aW,aT(aY)?aY.parentNode:aY)||aY.parentNode==aW)}catch(aX){return false}}function d(aW,aX){return ap(aW,aX)||aW==aX}function ar(aW,aX){if(ap(aW,aX)){while(aX&&aX.parentNode!=aW){aX=aX.parentNode}}return aX}function ac(aW){return aT(aW)?aW.length:aW.childNodes.length}function aB(aY,aX){var aW=aY.cloneNode(false);aY.deleteData(aX,aY.length);aW.deleteData(0,aX);aS.insertAfter(aW,aY)}function ah(aZ,aY){for(var aX in aY){var aW=aZ[aX];if(aX=="float"){aW=aZ[H.support.cssFloat?"cssFloat":"styleFloat"]}if(typeof aW=="object"){if(!ah(aW,aY[aX])){return false}}else{if(aW!=aY[aX]){return false}}}return true}var m=/^\s+$/;var b=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i;var aa=("color,padding-left,padding-right,padding-top,padding-bottom,background-color,background-attachment,background-image,background-position,background-repeat,border-top-style,border-top-width,border-top-color,border-bottom-style,border-bottom-width,border-bottom-color,border-left-style,border-left-width,border-left-color,border-right-style,border-right-width,border-right-color,font-family,font-size,font-style,font-variant,font-weight,line-height").split(",");var aS={blockParentOrBody:function(aW){return aS.parentOfType(aW,aD)||aW.ownerDocument.body},toHex:function(aX){var aW=b.exec(aX);if(!aW){return aX}return"#"+H.map(aW.slice(1),function(aY){return aY=parseInt(aY).toString(16),aY.length>1?aY:"0"+aY}).join("")},encode:function(aW){return aW.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\u00a0/g,"&nbsp;")},name:function(aW){return aW.nodeName.toLowerCase()},significantChildNodes:function(aW){return H.grep(aW.childNodes,function(aX){return aX.nodeType!=3||!aS.isWhitespace(aX)})},lastTextNode:function(aY){if(aY.nodeType==3){return aY}var aW=null;for(var aX=aY.lastChild;aX;aX=aX.previousSibling){if(aW=aS.lastTextNode(aX)){return aW}}return aW},is:function(aX,aW){return aS.name(aX)==aW},isMarker:function(aW){return aW.className=="t-marker"},isWhitespace:function(aW){return m.test(aW.nodeValue)},isBlock:function(aW){return V[aS.name(aW)]},isEmpty:function(aW){return g[aS.name(aW)]},isInline:function(aW){return n[aS.name(aW)]},scrollTo:function(aW){aW.ownerDocument.body.scrollTop=H(aT(aW)?aW.parentNode:aW).offset().top},insertAt:function(aW,aX,aY){aW.insertBefore(aX,aW.childNodes[aY]||null)},insertBefore:function(aW,aX){return aX.parentNode.insertBefore(aW,aX)},insertAfter:function(aW,aX){return aX.parentNode.insertBefore(aW,aX.nextSibling)},remove:function(aW){aW.parentNode.removeChild(aW)},trim:function(aW){for(var aX=aW.childNodes.length-1;aX>=0;aX--){var aY=aW.childNodes[aX];if(aT(aY)){if(aY.nodeValue.replace(/\ufeff/g,"").length==0){aS.remove(aY)}if(aS.isWhitespace(aY)){aS.insertBefore(aY,aW)}}else{if(aY.className!="t-marker"){aS.trim(aY);if(aY.childNodes.length==0&&!aS.isEmpty(aY)){aS.remove(aY)}}}}return aW},parentOfType:function(aX,aW){do{aX=aX.parentNode}while(aX&&!(aS.ofType(aX,aW)));return aX},ofType:function(aX,aW){return H.inArray(aS.name(aX),aW)>=0},changeTag:function(aX,a0){var a2=aS.create(aX.ownerDocument,a0);var aZ=aX.attributes;for(var aW=0;aW<aZ.length;aW++){var a3=aZ[aW];if(a3.specified){var aY=a3.nodeName;var a1=a3.nodeValue;if(aY=="class"){a2.className=a1}else{if(aY=="style"){a2.style.cssText=aX.style.cssText}else{a2.setAttribute(aY,a1)}}}}while(aX.firstChild){a2.appendChild(aX.firstChild)}aS.insertBefore(a2,aX);aS.remove(aX);return a2},wrap:function(aX,aW){aS.insertBefore(aW,aX);aW.appendChild(aX);return aW},unwrap:function(aX){var aW=aX.parentNode;while(aX.firstChild){aW.insertBefore(aX.firstChild,aX)}aW.removeChild(aX)},create:function(aW,aY,aX){return aS.attr(aW.createElement(aY),aX)},attr:function(aW,aX){aX=H.extend({},aX);if(aX&&"style" in aX){aS.style(aW,aX.style);delete aX.style}return H.extend(aW,aX)},style:function(aX,aW){H(aX).css(aW||{})},unstyle:function(aY,aW){for(var aX in aW){if(aX=="float"){aX=H.support.cssFloat?"cssFloat":"styleFloat"}aY.style[aX]=""}if(aY.style.cssText==""){aY.removeAttribute("style")}},inlineStyle:function(aX,aW,a1){var aZ=aS.create(aX,aW,a1);aX.body.appendChild(aZ);var a0=H(aZ);var aY=H.map(aa,function(a2){return a2+":"+a0.css(a2)}).join(";");a0.remove();return aY},commonAncestor:function(){var a3=arguments.length;if(!a3){return null}if(a3==1){return arguments[0]}var a4=[];var aY=Infinity;for(var aW=0;aW<a3;aW++){var a0=[];var aX=arguments[aW];while(aX){a0.push(aX);aX=aX.parentNode}a4.push(a0.reverse());aY=Math.min(aY,a0.length)}if(a3==1){return a4[0][0]}var aZ=null;for(aW=0;aW<aY;aW++){var a1=a4[0][aW];for(var a2=1;a2<a3;a2++){if(a1!=a4[a2][aW]){return aZ}}aZ=a1}return aZ}};var ax="xx-small,x-small,small,medium,large,x-large,xx-large".split(",");function h(aZ){var aW=[];var aX={"telerik:script":{start:function(a2){aW.push("<script");a1(a2);aW.push(">")},end:function(){aW.push("</script>")}},b:{start:function(){aW.push("<strong>")},end:function(){aW.push("</strong>")}},i:{start:function(){aW.push("<em>")},end:function(){aW.push("</em>")}},u:{start:function(){aW.push('<span style="text-decoration:underline;">')},end:function(){aW.push("</span>")}},font:{start:function(a5){aW.push('<span style="');var a4=a5.getAttribute("color");var a2=ax[a5.getAttribute("size")];var a3=a5.getAttribute("face");if(a4){aW.push("color:");aW.push(aS.toHex(a4));aW.push(";")}if(a3){aW.push("font-face:");aW.push(a3);aW.push(";")}if(a2){aW.push("font-size:");aW.push(a2);aW.push(";")}aW.push('">')},end:function(a2){aW.push("</span>")}}};function a1(a6){var a4=[],a5=a6.attributes,bg=H.trim;for(var bb=0,a9=a5.length;bb<a9;bb++){var bh=a5[bb];var a3=bh.nodeName;if(bh.specified||(a3=="value"&&a6.value!="")||(a3=="type"&&bh.nodeValue=="text")){if(a3.indexOf("_moz")<0&&a3!="complete"){a4.push(bh)}}}if(!a4.length){return}a4.sort(function(bj,bk){return bj.nodeName>bk.nodeName?1:bj.nodeName<bk.nodeName?-1:0});for(var bb=0,a9=a4.length;bb<a9;bb++){var bh=a4[bb];var a7=bh.nodeName;var be=bh.nodeValue;aW.push(" ");aW.push(a7);aW.push('="');if(a7=="style"){var a2=bg(be||a6.style.cssText).split(";");for(var bd=0,bi=a2.length;bd<bi;bd++){var a8=a2[bd];if(a8.length){var bf=a8.split(":");var ba=bg(bf[0].toLowerCase()),bc=bg(bf[1]);if(ba.indexOf("color")>=0){bc=aS.toHex(bc)}aW.push(ba);aW.push(":");aW.push(bc);aW.push(";")}}}else{if(a7=="src"||a7=="href"){aW.push(a6.getAttribute(a7,2))}else{aW.push(c[a7]?a7:be)}}aW.push('"')}}function aY(a4,a2){for(var a3=a4.firstChild;a3;a3=a3.nextSibling){a0(a3,a2)}}function a0(a2,a8){var a7=a2.nodeType;if(a7==1){if(a2.attributes._moz_dirty&&aS.is(a2,"br")){return}var a4=aS.name(a2);var a6=aX[a4];if(a6){a6.start(a2);aY(a2);a6.end(a2);return}aW.push("<");aW.push(a4);a1(a2);if(g[a4]){aW.push(" />")}else{aW.push(">");aY(a2,a8||aS.is(a2,"pre"));aW.push("</");aW.push(a4);aW.push(">")}}else{if(a7==3){var a5=a2.nodeValue;if(!a8&&H.support.leadingWhitespace){var a9=a2.parentNode;var a3=(aS.isInline(a9)?a9:a2).previousSibling;if(!a3||a3.innerHTML==""||aS.isBlock(a3)){a5=a5.replace(/^[\r\n\v\f\t ]+/,"")}a5=a5.replace(/ +/," ")}aW.push(aS.encode(a5))}else{if(a7==4){aW.push("<![CDATA[");aW.push(a2.data);aW.push("]]>")}else{if(a7==8){if(a2.data.indexOf("[CDATA[")<0){aW.push("<!--");aW.push(a2.data);aW.push("-->")}else{aW.push("<!");aW.push(a2.data);aW.push(">")}}}}}}aY(aZ);return aW.join("")}var L=0,J=1,I=2,E=3;function ai(aW){var aX=aW.startContainer;return aX.nodeType==9?aX:aX.ownerDocument}function p(aW){return aW.getSelection?aW.getSelection():new al(aW.document)}function aU(aW){var aX=ai(aW);return aI(aX)}function aI(aW){return p(y(aW))}function y(aW){return aW.defaultView||aW.parentWindow}function ab(aW,aZ,aY){function aX(a1){var a0=aW.cloneRange();a0.collapse(a1);a0[a1?"setStartBefore":"setEndAfter"](aZ);var a2=a0.extractContents();if(aY){a2=aS.trim(a2)}aS[a1?"insertBefore":"insertAfter"](a2,aZ)}aX(true);aX(false)}function R(aW){var aY=z.image(aW);if(aY){aW.setStartAfter(aY);aW.setEndAfter(aY)}var aX=aU(aW);aX.removeAllRanges();aX.addRange(aW)}function aw(aW){H.extend(this,{ownerDocument:aW,startContainer:aW,endContainer:aW,commonAncestorContainer:aW,startOffset:0,endOffset:0,collapsed:true})}aw.prototype={setStart:function(aX,aW){this.startContainer=aX;this.startOffset=aW;ae(this);D(this,true)},setEnd:function(aX,aW){this.endContainer=aX;this.endOffset=aW;ae(this);D(this,false)},setStartBefore:function(aW){this.setStart(aW.parentNode,S(aW))},setStartAfter:function(aW){this.setStart(aW.parentNode,S(aW)+1)},setEndBefore:function(aW){this.setEnd(aW.parentNode,S(aW))},setEndAfter:function(aW){this.setEnd(aW.parentNode,S(aW)+1)},selectNode:function(aW){this.setStartBefore(aW);this.setEndAfter(aW)},selectNodeContents:function(aW){this.setStart(aW,0);this.setEnd(aW,aW[aW.nodeType===1?"childNodes":"nodeValue"].length)},collapse:function(aW){if(aW){this.setEnd(this.startContainer,this.startOffset)}else{this.setStart(this.endContainer,this.endOffset)}},deleteContents:function(){var aW=this.cloneRange();if(this.startContainer!=this.commonAncestorContainer){this.setStartAfter(ar(this.commonAncestorContainer,this.startContainer))}this.collapse(true);(function aX(aY){while(aY.next()){aY.hasPartialSubtree()?aX(aY.getSubtreeIterator()):aY.remove()}})(new am(aW))},cloneContents:function(){var aW=ai(this);return(function aX(aY){for(var a0,aZ=aW.createDocumentFragment();a0=aY.next();){a0=a0.cloneNode(!aY.hasPartialSubtree());if(aY.hasPartialSubtree()){a0.appendChild(aX(aY.getSubtreeIterator()))}aZ.appendChild(a0)}return aZ})(new am(this))},extractContents:function(){var aW=this.cloneRange();if(this.startContainer!=this.commonAncestorContainer){this.setStartAfter(ar(this.commonAncestorContainer,this.startContainer))}this.collapse(true);var aY=this;var aX=ai(this);return(function aZ(a0){for(var a2,a1=aX.createDocumentFragment();a2=a0.next();){a0.hasPartialSubtree()?a2=a2.cloneNode(false):a0.remove(aY.originalRange);if(a0.hasPartialSubtree()){a2.appendChild(aZ(a0.getSubtreeIterator()))}a1.appendChild(a2)}return a1})(new am(aW))},insertNode:function(aW){if(aT(this.startContainer)){if(this.startOffset!=this.startContainer.nodeValue.length){aB(this.startContainer,this.startOffset)}aS.insertAfter(aW,this.startContainer)}else{aS.insertAt(this.startContainer,aW,this.startOffset)}this.setStart(this.startContainer,this.startOffset)},cloneRange:function(){return H.extend(new aw(this.ownerDocument),{startContainer:this.startContainer,endContainer:this.endContainer,commonAncestorContainer:this.commonAncestorContainer,startOffset:this.startOffset,endOffset:this.endOffset,collapsed:this.collapsed,originalRange:this})},toString:function(){var aW=this.startContainer.nodeName,aX=this.endContainer.nodeName;return[aW=="#text"?this.startContainer.nodeValue:aW,"(",this.startOffset,") : ",aX=="#text"?this.endContainer.nodeValue:aX,"(",this.endOffset,")"].join("")}};function k(a3,aY,a2,aX){if(a3==aY){return aX-a2}var aW=aY;while(aW&&aW.parentNode!=a3){aW=aW.parentNode}if(aW){return S(aW)-a2}aW=a3;while(aW&&aW.parentNode!=aY){aW=aW.parentNode}if(aW){return aX-S(aW)-1}var a1=aS.commonAncestor(a3,aY);var aZ=a3;while(aZ&&aZ.parentNode!=a1){aZ=aZ.parentNode}if(!aZ){aZ=a1}var a0=aY;while(a0&&a0.parentNode!=a1){a0=a0.parentNode}if(!a0){a0=a1}if(aZ==a0){return 0}return S(a0)-S(aZ)}function D(aW,aY){function aX(aZ){try{return k(aZ.startContainer,aZ.endContainer,aZ.startOffset,aZ.endOffset)<0}catch(a0){return true}}if(aX(aW)){if(aY){aW.commonAncestorContainer=aW.endContainer=aW.startContainer;aW.endOffset=aW.startOffset}else{aW.commonAncestorContainer=aW.startContainer=aW.endContainer;aW.startOffset=aW.endOffset}aW.collapsed=true}}function ae(aW){aW.collapsed=aW.startContainer==aW.endContainer&&aW.startOffset==aW.endOffset;var aX=aW.startContainer;while(aX&&aX!=aW.endContainer&&!ap(aX,aW.endContainer)){aX=aX.parentNode}aW.commonAncestorContainer=aX}function M(aW){return aW.createRange?aW.createRange():new aw(aW)}function am(aW){H.extend(this,{range:aW,_current:null,_next:null,_end:null});if(aW.collapsed){return}var aX=aW.commonAncestorContainer;this._next=aW.startContainer==aX&&!aT(aW.startContainer)?aW.startContainer.childNodes[aW.startOffset]:ar(aX,aW.startContainer);this._end=aW.endContainer==aX&&!aT(aW.endContainer)?aW.endContainer.childNodes[aW.endOffset]:ar(aX,aW.endContainer).nextSibling}am.prototype={hasNext:function(){return !!this._next},next:function(){var aW=this._current=this._next;this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null;if(aT(this._current)){if(this.range.endContainer==this._current){(aW=aW.cloneNode(true)).deleteData(this.range.endOffset,aW.length-this.range.endOffset)}if(this.range.startContainer==this._current){(aW=aW.cloneNode(true)).deleteData(0,this.range.startOffset)}}return aW},traverse:function(aY){function aX(){this._current=this._next;this._next=this._current&&this._current.nextSibling!=this._end?this._current.nextSibling:null;return this._current}var aW;while(aW=aX.call(this)){if(this.hasPartialSubtree()){this.getSubtreeIterator().traverse(aY)}else{aY(aW)}}return aW},remove:function(aY){var a0=this.range.startContainer==this._current;var a3=this.range.endContainer==this._current;if(aT(this._current)&&(a0||a3)){var a1=a0?this.range.startOffset:0;var aX=a3?this.range.endOffset:this._current.length;var aW=aX-a1;if(aY&&(a0||a3)){if(this._current==aY.startContainer&&a1<=aY.startOffset){aY.startOffset-=aW}if(this._current==aY.endContainer&&aX<=aY.endOffset){aY.endOffset-=aW}}this._current.deleteData(a1,aW)}else{var a2=this._current.parentNode;if(aY&&(this.range.startContainer==a2||this.range.endContainer==a2)){var aZ=S(this._current);if(a2==aY.startContainer&&aZ<=aY.startOffset){aY.startOffset-=1}if(a2==aY.endContainer&&aZ<aY.endOffset){aY.endOffset-=1}}aS.remove(this._current)}},hasPartialSubtree:function(){return !aT(this._current)&&(d(this._current,this.range.startContainer)||d(this._current,this.range.endContainer))},getSubtreeIterator:function(){var aW=this.range.cloneRange();aW.selectNodeContents(this._current);if(d(this._current,this.range.startContainer)){aW.setStart(this.range.startContainer,this.range.startOffset)}if(d(this._current,this.range.endContainer)){aW.setEnd(this.range.endContainer,this.range.endOffset)}return new am(aW)}};function al(aW){this.ownerDocument=aW;this.rangeCount=1}al.prototype={addRange:function(aW){var aX=this.ownerDocument.body.createTextRange();aL(aX,aW,false);aL(aX,aW,true);aX.select()},removeAllRanges:function(){this.ownerDocument.selection.empty()},getRangeAt:function(){var aX,aW=new aw(this.ownerDocument),aY=this.ownerDocument.selection;try{aX=aY.createRange()}catch(aZ){return aW}if(aY.type=="Control"){aW.selectNode(aX.item(0))}else{t(aX,aW,true);t(aX,aW,false);if(aW.startContainer.nodeType==9){aW.setStart(aW.endContainer,aW.startOffset)}if(aW.endContainer.nodeType==9){aW.setEnd(aW.startContainer,aW.endOffset)}if(aX.compareEndPoints("StartToEnd",aX)==0){aW.collapse(false)}}return aW}};function aL(a0,aZ,a3){var aW=aZ[a3?"startContainer":"endContainer"];var a5=aZ[a3?"startOffset":"endOffset"],aY=0;var a4=aT(aW)?aW:aW.childNodes[a5]||null;var aX=aT(aW)?aW.parentNode:aW;if(aW.nodeType==3||aW.nodeType==4){aY=a5}var a1=aX.insertBefore(aS.create(aZ.ownerDocument,"a"),a4);var a2=aZ.ownerDocument.body.createTextRange();a2.moveToElementText(a1);aS.remove(a1);a2[a3?"moveStart":"moveEnd"]("character",aY);a2.collapse(false);a0.setEndPoint(a3?"StartToStart":"EndToStart",a2)}function t(aY,aW,a0){var aZ=aS.create(aW.ownerDocument,"a"),aX=aY.duplicate();aX.collapse(a0);var a2=aX.parentElement();do{a2.insertBefore(aZ,aZ.previousSibling);aX.moveToElementText(aZ)}while(aX.compareEndPoints(a0?"StartToStart":"StartToEnd",aY)>0&&aZ.previousSibling);aX.setEndPoint(a0?"EndToStart":"EndToEnd",aY);var a1=aZ.nextSibling;if(!a1){a1=aZ.previousSibling;if(a1&&aT(a1)){aW.setEnd(a1,a1.nodeValue.length);aS.remove(aZ)}else{aW.selectNodeContents(a2);aS.remove(aZ);aW.endOffset-=1}return}aS.remove(aZ);if(aT(a1)){aW[a0?"setStart":"setEnd"](a1,aX.text.length)}else{aW[a0?"setStartBefore":"setEndBefore"](a1)}}function i(aW){this.enumerate=function(){var aX=[];function aY(aZ){if(aS.is(aZ,"img")||(aZ.nodeType==3&&!aS.isWhitespace(aZ))){aX.push(aZ)}else{aZ=aZ.firstChild;while(aZ){aY(aZ);aZ=aZ.nextSibling}}}new am(aW).traverse(aY);return aX}}function f(aW){return new i(aW).enumerate()}function az(aZ){var aX=[];for(var a0=0,aW=aZ.length;a0<aW;a0++){var aY=aS.parentOfType(aZ[a0],aD);if(aY&&H.inArray(aY,aX)<0){aX.push(aY)}}return aX}function Z(aW){var aX=[];new am(aW).traverse(function(aY){if(aY.className=="t-marker"){aX.push(aY)}});return aX}function aG(aW){var aZ=ai(aW);this.body=aZ.body;this.html=this.body.innerHTML;function a1(a5){var a3=0,a4=a5.nodeType;while(a5=a5.previousSibling){var a2=a5.nodeType;if(a2!=3||a4!=a2){a3++}a4=a2}return a3}function a0(a3,a2){if(a3.nodeType==3){while((a3=a3.previousSibling)&&a3.nodeType==3){a2+=a3.nodeValue.length}}return a2}function aY(a3){var a2=[];while(a3!=aZ){a2.push(a1(a3));a3=a3.parentNode}return a2}function aX(a2){var a4=aZ,a3=a2.length;while(a3--){a4=a4.childNodes[a2[a3]]}return a4}this.startContainer=aY(aW.startContainer);this.endContainer=aY(aW.endContainer);this.startOffset=a0(aW.startContainer,aW.startOffset);this.endOffset=a0(aW.endContainer,aW.endOffset);this.toRange=function(){var a2=aW.cloneRange();a2.setStart(aX(this.startContainer),this.startOffset);a2.setEnd(aX(this.endContainer),this.endOffset);return a2}}function af(){var aW;this.addCaret=function(aX){aW=aS.create(ai(aX),"span",{className:"t-marker"});aX.insertNode(aW);aX.selectNode(aW);return aW};this.removeCaret=function(aX){var a0=aW.previousSibling;var a1=0;if(a0){a1=aT(a0)?a0.nodeValue.length:S(a0)}var aZ=aW.parentNode;var a3=a0?S(a0):0;aS.remove(aW);u(aZ);var aY=aZ.childNodes[a3];if(aT(aY)){aX.setStart(aY,a1)}else{if(aY){var a2=aS.lastTextNode(aY);if(a2){aX.setStart(a2,a2.nodeValue.length)}else{aX[a0?"setStartAfter":"setStartBefore"](aY)}}else{if(!H.browser.msie&&aZ.innerHTML==""){aZ.innerHTML='<br _moz_dirty="" />'}aX.selectNodeContents(aZ)}}aX.collapse(true)};this.add=function(aX,aY){if(aY&&aX.collapsed){this.addCaret(aX);aX=z.expand(aX)}var aZ=aX.cloneRange();aZ.collapse(false);this.end=aS.create(ai(aX),"span",{className:"t-marker"});aZ.insertNode(this.end);aZ=aX.cloneRange();aZ.collapse(true);this.start=this.end.cloneNode(true);aZ.insertNode(this.start);aX.setStartBefore(this.start);aX.setEndAfter(this.end);u(aX.commonAncestorContainer);return aX};this.remove=function(a5){var a8=this.start,a0=this.end;u(a5.commonAncestorContainer);while(!a8.nextSibling&&a8.parentNode){a8=a8.parentNode}while(!a0.previousSibling&&a0.parentNode){a0=a0.parentNode}var a3=(a8.previousSibling&&a8.previousSibling.nodeType==3)&&(a8.nextSibling&&a8.nextSibling.nodeType==3);var a9=(a0.previousSibling&&a0.previousSibling.nodeType==3)&&(a0.nextSibling&&a0.nextSibling.nodeType==3);a8=a8.nextSibling;a0=a0.previousSibling;var a2=false;var ba=false;if(a8==this.end){ba=!!this.start.previousSibling;a8=a0=this.start.previousSibling||this.end.nextSibling;a2=true}aS.remove(this.start);aS.remove(this.end);var a6=a2?aT(a8)?a8.nodeValue.length:a8.childNodes.length:0;var aZ=aT(a0)?a0.nodeValue.length:a0.childNodes.length;if(a8.nodeType==3){while(a8.previousSibling&&a8.previousSibling.nodeType==3){a8=a8.previousSibling;a6+=a8.nodeValue.length}}if(a0.nodeType==3){while(a0.previousSibling&&a0.previousSibling.nodeType==3){a0=a0.previousSibling;aZ+=a0.nodeValue.length}}var bb=S(a8),a4=a8.parentNode;var a1=S(a0),aY=a0.parentNode;for(var aX=a8;aX.previousSibling;aX=aX.previousSibling){if(aX.nodeType==3&&aX.previousSibling.nodeType==3){bb--}}for(var a7=a0;a7.previousSibling;a7=a7.previousSibling){if(a7.nodeType==3&&a7.previousSibling.nodeType==3){a1--}}u(a4);if(a8.nodeType==3){a8=a4.childNodes[bb]}u(aY);if(a0.nodeType==3){a0=aY.childNodes[a1]}if(a2){if(a8.nodeType==3){a5.setStart(a8,a6)}else{a5[ba?"setStartAfter":"setStartBefore"](a8)}a5.collapse(true)}else{if(a8.nodeType==3){a5.setStart(a8,a6)}else{a5.setStartBefore(a8)}if(a0.nodeType==3){a5.setEnd(a0,aZ)}else{a5.setEndAfter(a0)}}if(aW){this.removeCaret(a5)}}}var aJ=/[\u0009-\u000d]|\u0020|\u00a0|\ufeff|\.|,|;|:|!|\(|\)|\?/;var z={nodes:function(aW){var aX=f(aW);if(!aX.length){aW.selectNodeContents(aW.commonAncestorContainer);aX=f(aW);if(!aX.length){aX=aS.significantChildNodes(aW.commonAncestorContainer)}}return aX},image:function(aW){var aX=[];new am(aW).traverse(function(aY){if(aS.is(aY,"img")){aX.push(aY)}});if(aX.length==1){return aX[0]}},expand:function(aZ){var a3=aZ.cloneRange();var aW=a3.startContainer.childNodes[a3.startOffset==0?0:a3.startOffset-1];var a1=a3.endContainer.childNodes[a3.endOffset];if(!aT(aW)||!aT(a1)){return a3}var a2=aW.nodeValue;var aY=a1.nodeValue;if(a2==""||aY==""){return a3}var a0=a2.split("").reverse().join("").search(aJ);var aX=aY.search(aJ);if(a0==0||aX==0){return a3}aX=aX==-1?aY.length:aX;a0=a0==-1?0:a2.length-a0;a3.setStart(aW,a0);a3.setEnd(a1,aX);return a3},isExpandable:function(a1){var aW=a1.startContainer;var a0=ai(a1);if(aW==a0||aW==a0.body){return false}var a4=a1.cloneRange();var aZ=aW.nodeValue;if(!aZ){return false}var a3=aZ.substring(0,a4.startOffset);var aY=aZ.substring(a4.startOffset);var a2=0,aX=0;if(a3!=""){a2=a3.split("").reverse().join("").search(aJ)}if(aY!=""){aX=aY.search(aJ)}return a2!=0&&aX!=0}};function W(aY){var aX=new aG(aY.range);var aW=new af();this.formatter=aY.formatter;this.getRange=function(){return aX.toRange()};this.lockRange=function(aZ){return aW.add(this.getRange(),aZ)};this.releaseRange=function(aZ){aW.remove(aZ);R(aZ)};this.undo=function(){aX.body.innerHTML=aX.html;R(aX.toRange())};this.redo=function(){this.exec()};this.exec=function(){var aZ=this.lockRange(true);this.formatter.editor=this.editor;this.formatter.toggle(aZ);this.releaseRange(aZ)}}function aK(aY,aX){var aW=aY.body;this.redo=function(){aW.innerHTML=aX.html;R(aX.toRange())};this.undo=function(){aW.innerHTML=aY.html;R(aY.toRange())}}function aF(aW){W.call(this,aW);this.managesUndoRedo=true;this.exec=function(){var aZ=this.editor;var aX=aZ.getRange();var aY=new aG(aX);aZ.clipboard.paste(aW.value||"");aZ.undoRedoStack.push(new aK(aY,new aG(aZ.getRange())));aZ.focus()}}function aA(){O.call(this);this.command=function(aW){return new aF(aW)};this.update=function(aW,aX){aW.data("tSelectBox").close()};this.init=function(aW,aX){var aY=aX.editor;aW.tSelectBox({data:aY.insertHtml,onItemCreate:function(aZ){aZ.html='<span unselectable="on">'+aZ.dataItem.Text+"</span>"},onChange:function(aZ){O.exec(aY,"insertHtml",aZ.value)},highlightFirst:false}).find(".t-input").html(aY.localization.insertHtml)}}function Q(){var aX=[],aW=-1;this.push=function(aY){aX=aX.slice(0,aW+1);aW=aX.push(aY)-1};this.undo=function(){if(this.canUndo()){aX[aW--].undo()}};this.redo=function(){if(this.canRedo()){aX[++aW].redo()}};this.canUndo=function(){return aW>=0};this.canRedo=function(){return aW!=aX.length-1}}function ao(aW){this.keydown=function(aZ){var aY=aW.keyboard;var aX=aY.isTypingKey(aZ);if(!aX){aR(aW)}if(aX&&!aY.typingInProgress()){this.startRestorePoint=new aG(aW.getRange());aY.startTyping(H.proxy(function(){this.endRestorePoint=new aG(aW.getRange());aW.undoRedoStack.push(new aK(this.startRestorePoint,this.endRestorePoint))},this));return true}return false};this.keyup=function(aY){var aX=aW.keyboard;if(aX.typingInProgress()){aX.endTyping();return true}return false}}function P(aX){var aW=false;this.createUndoCommand=function(){this.endRestorePoint=new aG(aX.getRange());aX.undoRedoStack.push(new aK(this.startRestorePoint,this.endRestorePoint));this.startRestorePoint=this.endRestorePoint};this.changed=function(){if(this.startRestorePoint){return this.startRestorePoint.html!=aX.body.innerHTML}return false},this.keydown=function(aZ){var aY=aX.keyboard;if(aY.isModifierKey(aZ)){if(aY.typingInProgress()){aY.endTyping(true)}this.startRestorePoint=new aG(aX.getRange());return true}if(aY.isSystem(aZ)){aW=true;if(this.changed()){aW=false;this.createUndoCommand()}return true}return false};this.keyup=function(aY){if(aW&&this.changed()){aW=false;this.createUndoCommand(aY);return true}return false}}function aq(a2){var aW=false;var a0;var aZ;function aY(a3){return(a3>=48&&a3<=90)||(a3>=96&&a3<=111)||(a3>=186&&a3<=192)||(a3>=219&&a3<=222)}this.toolFromShortcut=function(a6,a7){var a4=String.fromCharCode(a7.keyCode);for(var a3 in a6){var a5=a6[a3];if((a5.key==a4||a5.key==a7.keyCode)&&!!a5.ctrl==a7.ctrlKey&&!!a5.alt==a7.altKey&&!!a5.shift==a7.shiftKey){return a3}}};this.isTypingKey=function(a4){var a3=a4.keyCode;return(aY(a3)&&!a4.ctrlKey&&!a4.altKey)||a3==32||a3==13||a3==8||(a3==46&&!a4.shiftKey&&!a4.ctrlKey&&!a4.altKey)};this.isModifierKey=function(a4){var a3=a4.keyCode;return(a3==17&&!a4.shiftKey&&!a4.altKey)||(a3==16&&!a4.ctrlKey&&!a4.altKey)||(a3==18&&!a4.ctrlKey&&!a4.shiftKey)};this.isSystem=function(a3){return a3.keyCode==46&&a3.ctrlKey&&!a3.altKey&&!a3.shiftKey};this.startTyping=function(a3){aZ=a3;aW=true};function aX(){aW=false;aZ()}this.endTyping=function(a3){this.clearTimeout();if(a3){aX()}else{a0=window.setTimeout(aX,1000)}};this.typingInProgress=function(){return aW};this.clearTimeout=function(){window.clearTimeout(a0)};function a1(a5,a3){for(var a4=0;a4<a2.length;a4++){if(a2[a4][a3](a5)){break}}}this.keydown=function(a3){a1(a3,"keydown")};this.keyup=function(a3){a1(a3,"keyup")}}function a(a0){var aX=[new F()];function aW(a1){var a2=aS.create(a0.document,"div");a2.innerHTML=a1;var a3=a0.document.createDocumentFragment();while(a2.firstChild){a3.appendChild(a2.firstChild)}return a3}function aZ(a1){return/<(div|p|ul|ol|table|h[1-6])/i.test(a1)}this.oncut=function(a2){var a1=new aG(a0.getRange());setTimeout(function(){a0.undoRedoStack.push(new aK(a1,new aG(a0.getRange())))})};this.onpaste=function(a5){var a1=a0.getRange();var a3=new aG(a1);var a6=aS.create(a0.document,"div",{innerHTML:"\ufeff"});if(!H.browser.webkit){a6.style.display="none"}a0.body.appendChild(a6);if(a0.body.createTextRange){a5.preventDefault();var a2=a0.body.createTextRange();a2.moveToElementText(a6);H(a0.body).unbind("paste");a2.execCommand("paste");H(a0.body).bind("paste",arguments.callee)}else{var a4=a0.createRange();a4.selectNodeContents(a6);R(a4)}setTimeout(function(){R(a1);aS.remove(a6);if(aS.is(a6.lastChild,"br")){aS.remove(a6.lastChild)}a0.clipboard.paste(a6.innerHTML);a0.undoRedoStack.push(new aK(a3,new aG(a0.getRange())))})};function aY(a2,a4){if(a2){return aS.parentOfType(a4,["p","ul","ol"])||a4.parentNode}var a3=a4.parentNode;var a1=a4.ownerDocument.body;if(aS.isInline(a3)){while(a3.parentNode!=a1&&!aS.isBlock(a3.parentNode)){a3=a3.parentNode}}return a3}this.paste=function(a5){for(var a1=0,a3=aX.length;a1<a3;a1++){if(aX[a1].applicable(a5)){a5=aX[a1].clean(a5)}}a5=a5.replace(/^<li/i,"<ul><li").replace(/li>$/g,"li></ul>");var a2=aZ(a5);var a6=a0.getRange();a6.deleteContents();if(a6.startContainer==a0.document){a6.selectNodeContents(a0.body)}var a7=new af();var ba=a7.addCaret(a6);var a9=aY(a2,ba);var a8=false;if(!/body|td/.test(aS.name(a9))&&(a2||aS.isInline(a9))){a6.selectNode(ba);ab(a6,a9,true);a8=true}var a4=aW(a5);a6.insertNode(a4);a9=aY(a2,ba);if(a8){while(ba.parentNode!=a9){aS.unwrap(ba.parentNode)}aS.unwrap(ba.parentNode)}u(a6.commonAncestorContainer);ba.style.display="inline";aS.scrollTo(ba);a7.removeCaret(a6);R(a6)}}function F(){var aW=[/<!--(.|\n)*?-->/g,"",/mso-[^;"]*;?/ig,"",/<\/?(meta|link|style|o:|v:)[^>]*>((?:.|\n)*?<\/(meta|link|style|o:|v:)[^>]*>)?/ig,""];this.applicable=function(aZ){return/class="?Mso|style="[^"]*mso-/i.test(aZ)};function aY(aZ){if(/^[\u2022\u00b7\u00a7\u00d8o\-]\u00a0+/.test(aZ)){return"ul"}if(/^\s*\w+[\.\)]\u00a0{2,}/.test(aZ)){return"ol"}}function aX(a1){var a7=aS.create(document,"div",{innerHTML:a1});var a6=H(aD.join(","),a7);var a4=-1,bc,a9={ul:{},ol:{}},bb=a7;for(var aZ=0;aZ<a6.length;aZ++){var a3=a6[aZ];var a1=a3.innerHTML.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g,"\u00a0");var a2=aY(a1);if(!a2||aS.name(a3)!="p"){if(a3.innerHTML==""){aS.remove(a3)}else{a9={ul:{},ol:{}};bb=a7;a4=-1}continue}var ba=parseFloat(a3.style.marginLeft||0);var a8=a9[a2][ba];if(ba>a4||!a8){a8=aS.create(document,a2);if(bb==a7){aS.insertBefore(a8,a3)}else{bb.appendChild(a8)}a9[a2][ba]=a8}if(bc!=a2){for(var a0 in a9){for(var a5 in a9[a0]){if(H.contains(a8,a9[a0][a5])){delete a9[a0][a5]}}}}aS.remove(a3.firstChild);bb=aS.create(document,"li",{innerHTML:a3.innerHTML});a8.appendChild(bb);aS.remove(a3);a4=ba;bc=a2}return a7.innerHTML}this.clean=function(aZ){for(var a0=0,a1=aW.length;a0<a1;a0+=2){aZ=aZ.replace(aW[a0],aW[a0+1])}aZ=aX(aZ);aZ=aZ.replace(/\s+class="?[^"\s>]*"?/ig,"");return aZ}}function T(aX){function aW(aZ){var aY=0;for(var a0=aZ.parentNode.firstChild;a0;a0=a0.nextSibling){if(a0!=aZ&&a0.className!="t-marker"&&a0.nodeType==1){aY++}}return aY}this.findSuitable=function(aZ,aY){if(!aY&&aW(aZ)>0){return null}return aS.parentOfType(aZ,aX[0].tags)};this.findFormat=function(aY){for(var aZ=0;aZ<aX.length;aZ++){var a2=aY;var a0=aX[aZ].tags;var a1=aX[aZ].attr;if(a2&&aS.ofType(a2,a0)&&ah(a2,a1)){return a2}while(a2){a2=aS.parentOfType(a2,a0);if(a2&&ah(a2,a1)){return a2}}}return null};this.isFormatted=function(aY){for(var aZ=0;aZ<aY.length;aZ++){if(this.findFormat(aY[aZ])){return true}}return false}}function B(aX,aZ){this.finder=new T(aX);var aY=H.extend({},aX[0].attr,aZ);var aW=aX[0].tags[0];function a0(a1){return aS.wrap(a1,aS.create(a1.ownerDocument,aW,aY))}this.activate=function(a1,a2){if(this.finder.isFormatted(a2)){this.split(a1);this.remove(a2)}else{this.apply(a2)}};this.toggle=function(a1){var a3=f(a1);var a5=a3.length==0;var a6;if(a5){var a4=Z(a1);a6=a4[1];var a2=this.editor.document.createTextNode("\ufeff");aS.insertBefore(a2,a6);a3.push(a2);a2=a2.cloneNode(true);aS.insertAfter(a2,a6);a3.push(a2);a1.setEndAfter(a4[2])}this.activate(a1,a3);if(a5){this.editor.pendingFormats.push(a6.parentNode)}};this.apply=function(a3){var a6=[];for(var a5=0,a4=a3.length;a5<a4;a5++){var a1=a3[a5];var a2=this.finder.findSuitable(a1);if(a2){aS.attr(a2,aY)}else{a2=a0(a1)}a6.push(a2)}this.consolidate(a6)};this.remove=function(a2){for(var a3=0,a4=a2.length;a3<a4;a3++){var a1=this.finder.findFormat(a2[a3]);if(a1){aS.unwrap(a1)}}};this.split=function(a1){var a4=f(a1);var a5=a4.length==0;var a6;if(a5){a6=Z(a1)[1];a4.push(a6)}for(var a3=0,a7=a4.length;a3<a7;a3++){var a2=this.finder.findFormat(a4[a3]);if(a2){ab(a1,a2,true)}}};this.consolidate=function(a2){while(a2.length>1){var a3=a2.pop();var a1=a2[a2.length-1];if(a3.previousSibling&&a3.previousSibling.className=="t-marker"){a1.appendChild(a3.previousSibling)}if(a3.previousSibling==a1&&a3.style.cssText==a1.style.cssText){while(a3.firstChild){a1.appendChild(a3.firstChild)}aS.remove(a3)}}}}function aP(aX,aZ){T.call(this,aX);function aW(a1){var a3=a1.attributes,be=H.trim;for(var a0=0,bc=a3.length;a0<bc;a0++){var a8=a3[a0];var a7=a8.nodeName;var ba=a8.nodeValue;if(a8.specified&&a7=="style"){var a6=be(ba||a1.style.cssText).split(";");for(var a5=0,bb=a6.length;a5<bb;a5++){var a4=a6[a5];if(a4.length){var a9=a4.split(":");var a2=be(a9[0].toLowerCase()),bd=be(a9[1]);if(a2!=aZ){continue}return a2.indexOf("color")>=0?aS.toHex(bd):bd}}}}return}function aY(a5){var a4=H(aT(a5)?a5.parentNode:a5);var a2=a4.parents().andSelf();for(var a3=0,a0=a2.length;a3<a0;a3++){var a1=aZ=="className"?a2[a3].className:aW(a2[a3]);if(a1){return a1}}return"inherit"}this.getFormat=function(a2){var a1=aY(a2[0]);for(var a3=1,a0=a2.length;a3<a0;a3++){if(a1!=aY(a2[a3])){return""}}return a1};this.isFormatted=function(a0){return this.getFormat(a0)!==""}}function G(aW,aY,aX){B.call(this,aW,aY);this.finder=new aP(aW,aX);this.activate=function(aZ,a1){this.split(aZ);if(aX){var a0=aX.replace(/-([a-z])/,function(a3,a2){return a2.toUpperCase()});this[aY.style[a0]=="inherit"?"remove":"apply"](a1)}else{this.apply(a1)}}}function aO(aW){av.call(this,H.extend(aW,{finder:new T(aW.format),formatter:function(){return new B(aW.format)}}))}function l(aX){O.call(this,aX);var aW=new aP([{tags:["span"]}],aX.cssAttr);this.command=function(aY){return new aH(H.extend(aY,{formatter:function(){var aZ={};aZ[aX.domAttr]=aY.value;return new G([{tags:["span"]}],{style:aZ},aX.cssAttr)}}))};this.update=function(aZ,a0){var aY=aZ.data("tComboBox");aY.close();aY.value(aW.getFormat(a0))};this.init=function(aY,aZ){var a0=aZ.editor;aY.tComboBox({data:a0[aX.name],onChange:function(a1){O.exec(a0,aX.name,a1.value)},highlightFirst:false});aY.data("tComboBox").dropDown.onItemCreate=function(a1){a1.html='<span unselectable="on" style="'+aX.cssAttr+": "+a1.dataItem.Value+'">'+a1.dataItem.Text+"</span>"}}}function q(aX){O.call(this,aX);var aW=new aP([{tags:["span"]}],aX.cssAttr);this.update=function(aY){aY.data("tColorPicker").close()};this.command=function(aY){return new aH(H.extend(aY,{formatter:function(){var aZ={};aZ[aX.domAttr]=aY.value;return new G([{tags:["span"]}],{style:aZ},aX.cssAttr)}}))};this.init=function(aY,aZ){var a0=aZ.editor;aY.tColorPicker({selectedColor:"#000000",onChange:function(a1){O.exec(a0,aX.name,a1.value)}})}}function aj(){O.call(this);var aW=new aP([{tags:["span"]}],"className");this.command=function(aX){return new aH(H.extend(aX,{formatter:function(){return new G([{tags:["span"]}],{className:aX.value})}}))};this.update=function(aY,aZ){var aX=aY.data("tSelectBox");aX.close();aX.value(aW.getFormat(aZ))};this.init=function(aX,aY){var aZ=aY.editor;aX.tSelectBox({data:aZ.style,title:aZ.localization.style,onItemCreate:function(a1){var a0=aS.inlineStyle(aZ.document,"span",{className:a1.dataItem.Value});a1.html='<span unselectable="on" style="display:block;'+a0+'">'+a1.html+"</span>"},onChange:function(a0){O.exec(aZ,"style",a0.value)}})}}function aM(aW){function aX(a1,aY){for(var a0=0;a0<aY.length;a0++){var aZ=aY[a0];if(aZ==null||!d(a1,aZ)){return false}}return true}this.findSuitable=function(aY){var aZ=[];for(var a0=0;a0<aY.length;a0++){var a1=aS.parentOfType(aY[a0],aW[0].tags);if(!a1){return[]}if(H.inArray(a1,aZ)<0){aZ.push(a1)}}for(var a0=0;a0<aZ.length;a0++){if(aX(aZ[a0],aZ)){return[aZ[a0]]}}return aZ};this.findFormat=function(aY){for(var aZ=0;aZ<aW.length;aZ++){var a2=aY;var a0=aW[aZ].tags;var a1=aW[aZ].attr;while(a2){if(aS.ofType(a2,a0)&&ah(a2,a1)){return a2}a2=a2.parentNode}}return null};this.getFormat=function(a0){var a2=H.proxy(function(a3){return this.findFormat(aT(a3)?a3.parentNode:a3)},this),aZ=a2(a0[0]);if(!aZ){return""}for(var a1=1,aY=a0.length;a1<aY;a1++){if(aZ!=a2(a0[a1])){return""}}return aZ.nodeName.toLowerCase()};this.isFormatted=function(aY){for(var aZ=0;aZ<aY.length;aZ++){if(!this.findFormat(aY[aZ])){return false}}return true}}function e(aX,aY){var aW=new aM(aX);function aZ(a4,a1,a7){var a5=a7.length==1?aS.blockParentOrBody(a7[0]):aS.commonAncestor.apply(null,a7);if(aS.isInline(a5)){a5=aS.blockParentOrBody(a5)}var a3=aS.significantChildNodes(a5);var a2=S(a3[0]);var a6=aS.create(a5.ownerDocument,a4,a1);for(var a0=0;a0<a3.length;a0++){var a8=a3[a0];if(aS.isBlock(a8)){aS.attr(a8,a1);if(a6.childNodes.length){aS.insertBefore(a6,a8);a6=a6.cloneNode(false)}a2=S(a8)+1;continue}a6.appendChild(a8)}if(a6.firstChild){aS.insertAt(a5,a6,a2)}}this.apply=function(a2){var a5=aS.is(a2[0],"img")?[a2[0]]:aW.findSuitable(a2);var a1=a5.length?aV(aS.name(a5[0]),aX):aX[0];var a0=a1.tags[0];var a4=H.extend({},a1.attr,aY);if(a5.length){for(var a3=0;a3<a5.length;a3++){aS.attr(a5[a3],a4)}}else{aZ(a0,a4,a2)}};this.remove=function(a1){for(var a2=0,a3=a1.length;a2<a3;a2++){var a0=aW.findFormat(a1[a2]);if(a0){if(aS.ofType(a0,["p","img","li"])){aS.unstyle(a0,aV(aS.name(a0),aX).attr.style)}else{aS.unwrap(a0)}}}};this.toggle=function(a0){var a1=z.nodes(a0);if(aW.isFormatted(a1)){this.remove(a1)}else{this.apply(a1)}}}function x(aX,aY){var aW=new aM(aX);this.apply=function(a6){var a4=az(a6);var a1=aX[0].tags[0];if(a4.length){for(var aZ=0,a5=a4.length;aZ<a5;aZ++){if(aS.is(a4[aZ],"li")){var a3=a4[aZ].parentNode;var a0=new ay(a3.nodeName.toLowerCase(),a1);var a2=this.editor.createRange();a2.selectNode(a4[aZ]);a0.toggle(a2)}else{aS.changeTag(a4[aZ],a1)}}}else{new e(aX,aY).apply(a6)}};this.toggle=function(aZ){var a0=f(aZ);if(!a0.length){aZ.selectNodeContents(aZ.commonAncestorContainer);a0=f(aZ);if(!a0.length){a0=aS.significantChildNodes(aZ.commonAncestorContainer)}}this.apply(a0)}}function aH(aW){aW.formatter=aW.formatter();W.call(this,aW)}function au(aW){av.call(this,H.extend(aW,{finder:new aM(aW.format),formatter:function(){return new e(aW.format)}}))}function N(){O.call(this);var aW=new aM([{tags:aD}]);this.command=function(aX){return new aH(H.extend(aX,{formatter:function(){return new x([{tags:[aX.value]}],{})}}))};this.update=function(aY,aZ){var aX=aY.data("tSelectBox");aX.close();aX.value(aW.getFormat(aZ))};this.init=function(aX,aY){var aZ=aY.editor;aX.tSelectBox({data:aZ.formatBlock,title:aZ.localization.formatBlock,onItemCreate:function(a0){var a1=a0.dataItem.Value;a0.html="<"+a1+' unselectable="on" style="margin: .3em 0;'+aS.inlineStyle(aZ.document,a1)+'">'+a0.dataItem.Text+"</"+a1+">"},onChange:function(a0){O.exec(aZ,"formatBlock",a0.value)},highlightFirst:false})}}function w(aW){W.call(this,aW);this.exec=function(){var a4=this.getRange();var a3=ai(a4);var aX=H.browser.msie?"":'<br _moz_dirty="" />';var a9=aS.parentOfType(a4.startContainer,["p"]),a2=aS.parentOfType(a4.endContainer,["p"]),a8=(a9&&!a2)||(!a9&&a2);a4.deleteContents();var a5=aS.create(a3,"a");a4.insertNode(a5);var a7=aS.parentOfType(a5,"li".split(","));var aZ;if(a7){var a1=a4.cloneRange();a1.selectNode(a7);if(f(a1).length==0){var a0=aS.create(a3,"p");if(a7.nextSibling){ab(a1,a7.parentNode)}aS.insertAfter(a0,a7.parentNode);aS.remove(a7.parentNode.childNodes.length==1?a7.parentNode:a7);a0.innerHTML=aX;aZ=a0}}if(!aZ){if(!a7){new e([{tags:["p"]}]).apply([a5])}a4.selectNode(a5);var a6=aS.parentOfType(a5,[a7?"li":"p"]);ab(a4,a6,a8);var aY=a6.previousSibling;if(aS.is(aY,"li")&&aY.firstChild&&!aS.is(aY.firstChild,"br")){aY=aY.firstChild}aZ=a6.nextSibling;if(aS.is(aZ,"li")&&aZ.firstChild&&!aS.is(aZ.firstChild,"br")){aZ=aZ.firstChild}aS.remove(a6);if(aY.firstChild&&aS.is(aY.firstChild,"br")){aS.remove(aY.firstChild)}if(aT(aY)&&aY.nodeValue==""){aY=aY.parentNode}if(aY&&aY.innerHTML==""){aY.innerHTML=aX}if(aZ.firstChild&&aS.is(aZ.firstChild,"br")){aS.remove(aZ.firstChild)}if(aT(aZ)&&aZ.nodeValue==""){aZ=aZ.parentNode}if(aZ.innerHTML==""){aZ.innerHTML=aX}u(aY)}u(aZ);a4.selectNodeContents(aZ);a4.collapse(true);aS.scrollTo(aZ);R(a4)}}function ag(aW){W.call(this,aW);this.exec=function(){var aX=this.getRange();aX.deleteContents();var aZ=aS.create(ai(aX),"br");aX.insertNode(aZ);aZ.parentNode.normalize();if(!H.browser.msie&&(!aZ.nextSibling||aS.isWhitespace(aZ.nextSibling))){var aY=aZ.cloneNode(true);aY.setAttribute("_moz_dirty","");aS.insertAfter(aY,aZ)}aX.setStartAfter(aZ);aX.collapse(true);R(aX)}}function aN(aW){var aX=[aW=="ul"?"ol":"ul",aW];aM.call(this,[{tags:aX}]);this.isFormatted=function(aZ){var a1=[],a0;for(var aY=0;aY<aZ.length;aY++){if((a0=this.findFormat(aZ[aY]))&&aS.name(a0)==aW&&H.inArray(a0,a1)<0){a1.push(a0)}}return a1.length==1};this.findSuitable=function(aY){var aZ=aS.parentOfType(aY[0],aX);if(aZ&&aS.name(aZ)==aW){return aZ}return null}}function ay(aY,a1){var aX=new aN(aY);function a2(a4,a5){var a3=aS.create(a4.ownerDocument,"li");for(var a6=0;a6<a5.length;a6++){var a7=a5[a6];if(aS.is(a7,"li")){a4.appendChild(a7);continue}a3.appendChild(a7);if(aS.isBlock(a7)){a4.appendChild(a3);aS.unwrap(a7);a3=a3.cloneNode(false)}}if(a3.firstChild){a4.appendChild(a3)}}function a0(a3,a4){for(var a5=0;a5<a4.length;a5++){if(d(a3,a4[a5])){return true}}return false}function aZ(a4,a3){return a0(a4,a3)||aS.isInline(a4)||a4.nodeType==3}this.split=function(a3){var a6=f(a3);if(a6.length){var a8=aS.parentOfType(a6[0],["li"]);var a7=aS.parentOfType(a6[a6.length-1],["li"]);a3.setStartBefore(a8);a3.setEndAfter(a7);for(var a5=0,a9=a6.length;a5<a9;a5++){var a4=aX.findFormat(a6[a5]);if(a4){ab(a3,a4,true)}}}};this.apply=function(a5){var a7=a5.length==1?aS.parentOfType(a5[0],["ul","ol"]):aS.commonAncestor.apply(null,a5);if(!a7){a7=a5[0].ownerDocument.body}if(aS.isInline(a7)){a7=aS.blockParentOrBody(a7)}var a4=[];var ba=aX.findSuitable(a5);if(!ba){ba=new aN(aY=="ul"?"ol":"ul").findSuitable(a5)}var a8=aS.significantChildNodes(a7);for(var a3=0;a3<a8.length;a3++){var a6=a8[a3];var a9=aS.name(a6);if(aZ(a6,a5)&&(!ba||!d(ba,a6))){if(ba&&(a9=="ul"||a9=="ol")){H.each(a6.childNodes,function(){a4.push(this)});aS.remove(a6)}else{a4.push(a6)}}}if(a4.length==a8.length&&a7!=a5[0].ownerDocument.body){a4=[a7]}if(!ba){ba=aS.create(a7.ownerDocument,aY);aS.insertBefore(ba,a4[0])}a2(ba,a4);if(!aS.is(ba,aY)){aS.changeTag(ba,aY)}};function aW(a6){for(var a3=a6.firstChild;a3;a3=a3.nextSibling){var a5=aS.create(a6.ownerDocument,a1||"p");while(a3.firstChild){var a4=a3.firstChild;if(aS.isBlock(a4)){aS.insertBefore(a4,a6)}else{a5.appendChild(a4)}}if(a5.firstChild){aS.insertBefore(a5,a6)}}aS.remove(a6)}this.remove=function(a4){var a5;for(var a3=0,a6=a4.length;a3<a6;a3++){if(a5=aX.findFormat(a4[a3])){aW(a5)}}};this.toggle=function(a3){var a4=f(a3);if(!a4.length){a3.selectNodeContents(a3.commonAncestorContainer);a4=f(a3);if(!a4.length){a4=aS.significantChildNodes(a3.commonAncestorContainer)}}if(aX.isFormatted(a4)){this.split(a3);this.remove(a4)}else{this.apply(a4)}}}function aQ(aW){aW.formatter=new ay(aW.tag);W.call(this,aW)}function o(aW){av.call(this,H.extend(aW,{finder:new aN(aW.tag)}));this.command=function(aX){return new aQ(H.extend(aX,{tag:aW.tag}))}}function ad(){this.findSuitable=function(aW){return aS.parentOfType(aW,["a"])}}function aE(){this.finder=new ad();this.apply=function(aW,a2){var aZ=f(aW);if(a2.innerHTML!=undefined){var a1=Z(aW);var aY=ai(aW);aW.deleteContents();var aX=aS.create(aY,"a",a2);aW.insertNode(aX);if(a1.length>1){aS.insertAfter(a1[a1.length-1],aX);aS.insertAfter(a1[1],aX);aS[aZ.length>0?"insertBefore":"insertAfter"](a1[0],aX)}}else{var a0=new B([{tags:["a"]}],a2);a0.finder=this.finder;a0.apply(aZ)}}}function an(aW){aW.formatter={toggle:function(aX){new B([{tags:["a"]}]).remove(f(aX))}};W.call(this,aW)}function at(aX){W.call(this,aX);var aY;this.async=true;var aW=new aE();this.exec=function(){var a0=this.getRange();var a2=a0.collapsed;a0=this.lockRange(true);var a8=f(a0);var aZ=null;var a7=this;function a3(bc){var a9=H("#t-editor-link-url",a5.element).val();if(a9&&a9!="http://"){aY={href:a9};var ba=H("#t-editor-link-title",a5.element).val();if(ba){aY.title=ba}var bd=H("#t-editor-link-text",a5.element).val();if(bd!==aZ){aY.innerHTML=bd}var bb=H("#t-editor-link-target",a5.element).val();if(bb!="false"){aY.target="_blank"}aW.apply(a0,aY)}a1(bc);if(a7.change){a7.change()}}function a1(a9){a9.preventDefault();a5.destroy();y(ai(a0)).focus();a7.releaseRange(a0)}var a4=a8.length?aW.finder.findSuitable(a8[0]):null;var a6=a8.length<=1||(a8.length==2&&a2);var a5=r.window.create(H.extend({},this.editor.dialogOptions,{title:"Insert link",html:new H.telerik.stringBuilder().cat('<div class="t-editor-dialog">').cat("<ol>").cat('<li class="t-form-text-row"><label for="t-editor-link-url">Web address</label><input type="text" id="t-editor-link-url"/></li>').catIf('<li class="t-form-text-row"><label for="t-editor-link-text">Text</label><input type="text" id="t-editor-link-text"/></li>',a6).cat('<li class="t-form-text-row"><label for="t-editor-link-title">Tooltip</label><input type="text" id="t-editor-link-title"/></li>').cat('<li class="t-form-checkbox-row"><input type="checkbox" id="t-editor-link-target"/><label for="t-editor-link-target">Open link in new window</label></li>').cat("</ol>").cat('<div class="t-button-wrapper">').cat('<button class="t-dialog-insert t-button t-state-default">Insert</button>').cat("&nbsp;or&nbsp;").cat('<a href="#" class="t-dialog-close t-link">Close</a>').cat("</div>").cat("</div>").string(),onClose:a1})).hide().find(".t-dialog-insert").click(a3).end().find(".t-dialog-close").click(a1).end().find(".t-form-text-row input").keydown(function(a9){if(a9.keyCode==13){a3(a9)}else{if(a9.keyCode==27){a1(a9)}}}).end().delegate(".t-button","mouseenter",r.buttonHover).delegate(".t-button","mouseleave",r.buttonLeave).find("#t-editor-link-url").val(a4?a4.getAttribute("href",2):"http://").end().find("#t-editor-link-text").val(a8.length>0?(a8.length==1?a8[0].nodeValue:a8[0].nodeValue+a8[1].nodeValue):"").end().find("#t-editor-link-title").val(a4?a4.title:"").end().find("#t-editor-link-target").val(a4?a4.target=="_blank":"false").end().show().data("tWindow").center();if(a6&&a8.length>0){aZ=H("#t-editor-link-text",a5.element).val()}H("#t-editor-link-url",a5.element).focus().select()},this.redo=function(){var aZ=this.lockRange(true);aW.apply(aZ,aY);this.releaseRange(aZ)}}function A(aX){O.call(this,H.extend(aX,{command:an}));var aW=new ad();this.init=function(aY){aY.attr("unselectable","on").addClass("t-state-disabled")};this.update=function(aY,aZ){aY.toggleClass("t-state-disabled",!aW.findSuitable(aZ[0])).removeClass("t-state-hover")}}function U(aX){W.call(this,aX);this.async=true;var aY;function aW(a0,aZ){if(aY.src&&aY.src!="http://"){if(!a0){a0=aS.create(ai(aZ),"img",aY);a0.onload=a0.onerror=function(){a0.removeAttribute("complete");a0.removeAttribute("width");a0.removeAttribute("height")};aZ.deleteContents();aZ.insertNode(a0);aZ.setStartAfter(a0);aZ.setEndAfter(a0);R(aZ);return true}else{aS.attr(a0,aY)}}return false}this.redo=function(){var aZ=this.lockRange();if(!aW(z.image(aZ),aZ)){this.releaseRange(aZ)}};this.exec=function(){var aZ=this.lockRange();var a2=false;var a1=z.image(aZ);var a3=this;function a0(a6){aY={src:H("#t-editor-image-url",a4.element).val(),alt:H("#t-editor-image-title",a4.element).val()};a2=aW(a1,aZ);a5(a6);if(a3.change){a3.change()}}function a5(a6){a6.preventDefault();a4.destroy();y(ai(aZ)).focus();if(!a2){a3.releaseRange(aZ)}}var a4=r.window.create(H.extend({},this.editor.dialogOptions,{title:"Insert image",html:new H.telerik.stringBuilder().cat('<div class="t-editor-dialog">').cat("<ol>").cat('<li class="t-form-text-row"><label for="t-editor-image-url">Web address</label><input type="text" id="t-editor-image-url"/></li>').cat('<li class="t-form-text-row"><label for="t-editor-image-title">Tooltip</label><input type="text" id="t-editor-image-title"/></li>').cat("</ol>").cat('<div class="t-button-wrapper">').cat('<button class="t-dialog-insert t-button t-state-default">Insert</button>').cat("&nbsp;or&nbsp;").cat('<a href="#" class="t-dialog-close t-link">Close</a>').cat("</div>").cat("</div>").string(),onClose:a5})).hide().find(".t-dialog-insert").click(a0).end().find(".t-dialog-close").click(a5).end().find(".t-form-text-row input").keydown(function(a6){if(a6.keyCode==13){a0(a6)}else{if(a6.keyCode==27){a5(a6)}}}).end().delegate(".t-button","mouseenter",r.buttonHover).delegate(".t-button","mouseleave",r.buttonLeave).find("#t-editor-image-url").val(a1?a1.getAttribute("src",2):"http://").end().find("#t-editor-image-title").val(a1?a1.alt:"").end().show().data("tWindow").center();H("#t-editor-image-url",a4.element).focus().select()}}r.selectbox=function(aY,aW){var a1;var a4=H(aY);var aX=a4.find(".t-input");var aZ=new r.dropDown({outerHeight:a4.outerHeight(),outerWidth:a4.outerWidth(),zIndex:r.list.getZIndex(a4),effects:r.fx.slide.defaults(),onOpen:function(){var a5=a4.offset();aZ.position(a5.top,a5.left);return true},onItemCreate:aW.onItemCreate,onClick:function(a5){a0(aW.data[H(a5.item).index()].Value);aW.onChange({value:a1})}});function a3(){if(!aZ.$items){aZ.dataBind(aW.data)}}function a2(a5){aX.html(a5)}function a0(a7){a3();var a8=-1;for(var a6=0,a5=aW.data.length;a6<a5;a6++){if(aW.data[a6].Value==a7){a8=a6;break}}if(a8!=-1){aZ.$items.removeClass("t-state-selected").eq(a8).addClass("t-state-selected");a2(H(aZ.$items[a8]).text());a1=aW.data[a8].Value}}this.value=function(a5){a0(a5);if(a1!=a5){a2(aW.title)}};this.close=function(){aZ.close()};a2(aW.title);a4.bind({click:function(a5){a3();if(aZ.isOpened()){aZ.close()}else{aZ.open()}}});H(document).bind("mousedown",H.proxy(function(a7){var a5=aZ.$element;var a6=a5&&a5.parent().length>0;if(a6&&!H.contains(aY,a7.target)&&!H.contains(a5.parent()[0],a7.target)){aZ.close()}},this))};H.fn.tSelectBox=function(aW){return r.create(this,{name:"tSelectBox",init:function(aX,aY){return new r.selectbox(aX,aY)},options:aW})};H.fn.tSelectBox.defaults={effects:H.fn.tDropDownList.defaults.effects};r.colorpicker=function(aX,aY){this.element=aX;var aW=H(aX);H.extend(this,aY);aW.bind("click",H.proxy(this.click,this));if(this.selectedColor){aW.find(".t-selected-color").css("background-color",this.selectedColor)}H(aX.ownerDocument).bind("mousedown",H.proxy(function(aZ){if(!H(aZ.target).closest(".t-colorpicker-popup").length){this.close()}},this));r.bind(this,{change:this.onChange,load:this.onLoad})};r.colorpicker.prototype={select:function(aW){if(aW){aW=aS.toHex(aW);if(!r.trigger(this.element,"change",{value:aW})){this.value(aW);this.close()}}else{r.trigger(this.element,"change",{value:this.selectedColor})}},open:function(){var aY=this.popup();var aX=H(this.element);var aZ=aX.offset();aZ.top+=aX.outerHeight();var aW="auto";aX.parents().andSelf().each(function(){aW=H(this).css("zIndex");if(Number(aW)){aW=Number(aW)+1;return false}});r.fx._wrap(aY).css(H.extend({position:"absolute",zIndex:aW},aZ));aY.find(".t-item").bind("click",H.proxy(function(a0){var a1=H(a0.target,a0.target.ownerDocument).css("background-color");this.select(a1)},this));r.fx.play(this.effects,aY,{direction:"bottom"})},close:function(){if(!this.$popup){return}r.fx.rewind(this.effects,this.$popup,{direction:"bottom"},H.proxy(function(){aS.remove(this.$popup[0].parentNode);this.$popup=null},this))},toggle:function(){if(!this.$popup||!this.$popup.is(":visible")){this.open()}else{this.close()}},click:function(aW){if(H(aW.target).closest(".t-tool-icon").length>0){this.select()}else{this.toggle()}},value:function(aW){if(!aW){return this.selectedColor}aW=aS.toHex(aW);this.selectedColor=aW;H(".t-selected-color",this.element).css("background-color",aW)},popup:function(){if(!this.$popup){this.$popup=H(r.colorpicker.buildPopup(this)).hide().appendTo(document.body)}return this.$popup}};H.extend(r.colorpicker,{buildPopup:function(a0){var aX=new r.stringBuilder();aX.cat('<div class="t-popup t-group t-colorpicker-popup">').cat('<ul class="t-reset">');var a1=a0.data;var aZ=(a0.value()||"").substring(1);for(var aY=0,aW=a1.length;aY<aW;aY++){aX.cat('<li class="t-item').catIf(" t-selected",a1[aY]==aZ).cat('" style="background-color:#').cat(a1[aY]).cat('"></li>')}aX.cat("</ul></div>");return aX.string()}});H.fn.tColorPicker=function(aW){return r.create(this,{name:"tColorPicker",init:function(aX,aY){return new r.colorpicker(aX,aY)},options:aW})};H.fn.tColorPicker.defaults={data:"000000,7f7f7f,880015,ed1c24,ff7f27,fff200,22b14c,00a2e8,3f48cc,a349a4,ffffff,c3c3c3,b97a57,ffaec9,ffc90e,efe4b0,b5e61d,99d9ea,7092be,c8bfe7".split(","),selectedColor:null,effects:H.fn.tDropDownList.defaults.effects};function C(){var aW=new aM([{tags:aD}]);function aX(aY){return aY.style.marginLeft||0}this.apply=function(a6){var a7=aW.findSuitable(a6);if(a7.length){var a2=[];for(var aY=0;aY<a7.length;aY++){if(aS.is(a7[aY],"li")){if(H(a7[aY]).index()==0){a2.push(a7[aY].parentNode)}else{if(H.inArray(a7[aY].parentNode,a2)<0){a2.push(a7[aY])}}}else{a2.push(a7[aY])}}while(a2.length){var a0=a2.shift();if(aS.is(a0,"li")){var a5=a0.parentNode;var a3=H(a0).prev("li");var a1=a3.find(">ul")[0];if(!a1){a1=aS.create(a0.ownerDocument,aS.name(a5));a3.append(a1)}while(a0&&a0.parentNode==a5){a1.appendChild(a0);a0=a2.shift()}}else{var a4=parseInt(aX(a0))+30;aS.style(a0,{marginLeft:a4})}}}else{var aZ=new e([{tags:aD}],{style:{marginLeft:30}});aZ.apply(a6)}};this.remove=function(a4){var a5=aW.findSuitable(a4);for(var aY=0;aY<a5.length;aY++){var a1=H(a5[aY]);if(a1.is("li")){var a2=a1.parent();var a0=a2.parent();if(a0.is("li")&&!aX(a2[0])){var aZ=a1.nextAll("li");if(aZ.length){H(a2[0].cloneNode(false)).appendTo(a1).append(aZ)}a1.insertAfter(a0);if(!a2.children("li").length){a2.remove()}continue}else{a1=a2}}var a3=parseInt(aX(a1[0]))-30;aS[a3<=0?"unstyle":"style"](a1[0],{marginLeft:a3})}}}function v(aW){aW.formatter={toggle:function(aX){new C().apply(z.nodes(aX))}};W.call(this,aW)}function X(aW){aW.formatter={toggle:function(aX){new C().remove(z.nodes(aX))}};W.call(this,aW)}function Y(){O.call(this,{command:X});var aW=new aM([{tags:aD}]);this.init=function(aX){aX.attr("unselectable","on").addClass("t-state-disabled")};this.update=function(aY,aZ){var aX=aW.findSuitable(aZ);for(var a0=0;a0<aX.length;a0++){if(aS.is(aX[a0],"li")||aX[a0].style.marginLeft){aY.removeClass("t-state-disabled");return}}aY.addClass("t-state-disabled").removeClass("t-state-hover")}}function K(a0,aW){a0.hide();var aY=H("<iframe />",{src:'javascript:"<html></html>"',frameBorder:"0",className:"t-content"}).css("display","").insertBefore(a0)[0];var aZ=aY.contentWindow||aY;var aX=aZ.document||aY.contentDocument;var a1=a0.val().replace(/(<\/?img[^>]*>)[\r\n\v\f\t ]+/ig,"$1");aX.designMode="On";aX.open();aX.write(new r.stringBuilder().cat('<!DOCTYPE><html><head xmlns="http://www.w3.org/1999/xhtml">').cat('<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />').cat('<style type="text/css">').cat("html,body{padding:0;margin:0;font-family:Verdana,Geneva,sans-serif;background:#fff;}").cat("html{font-size:100%}body{font-size:.75em;line-height:1.5em;padding-top:1px;margin-top:-1px;}").cat("h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}").cat("p{margin:1em 0;padding:0 .2em}.t-marker{display:none;}").cat("ul,ol{padding-left:2.5em}").cat("a{color:#00a}").cat("code{font-size:1.23em}").cat("</style>").cat(H.map(aW,function(a2){return['<link type="text/css" href="',a2,'" rel="stylesheet"/>'].join("")}).join("")).cat('</head><body spellcheck="false">').cat(a1).cat("</body></html>").string());aX.close();return aZ}function aC(aW){r.trigger(aW.element,"selectionChange")}function aR(aW){if(aW.pendingFormats.length==0){return}aW.pendingFormats.reverse();H.each(aW.pendingFormats,function(){for(var aX=this.firstChild;aX;aX=aX.nextSibling){while(aX.nodeType==3&&(charIndex=aX.nodeValue.indexOf("\ufeff"))>=0){aX.deleteData(charIndex,1)}}});H.each(aW.pendingFormats,function(){if(this.innerHTML==""&&this.parentNode){aS.remove(this)}});aW.pendingFormats=[]}r.editor=function(aY,aW){if(/Mobile.*Safari/.test(navigator.userAgent)){return}var a3=this;this.element=aY;var aZ=H(aY);aZ.closest("form").bind("submit",function(){a3.update()});H.extend(this,aW);r.bind(this,{load:this.onLoad,selectionChange:this.onSelectionChange,change:this.onChange,execute:this.onExecute});this.textarea=aZ.find("textarea").attr("autocomplete","off")[0];this.window=K(H(this.textarea),this.stylesheets);this.document=this.window.contentDocument||this.window.document;this.body=this.document.body;this.keyboard=new aq([new ao(this),new P(this)]);this.clipboard=new a(this);this.pendingFormats=[];this.undoRedoStack=new Q();function aX(a5){var a4=H.grep(a5.className.split(" "),function(a6){return !/^t-(widget|tool-icon|state-hover|header|combobox|dropdown|selectbox|colorpicker)$/i.test(a6)});return a4[0]?a4[0].substring(2):"custom"}function a1(a4,a5){if(!a5.key){return a4}return new r.stringBuilder().cat(a4).cat(" (").catIf("Ctrl + ",a5.ctrl).catIf("Shift + ",a5.shift).catIf("Alt + ",a5.alt).cat(a5.key).cat(")").string()}H(this.window).bind("blur",function(){var a5=a3.textarea.value;var a4=a3.encodedValue();a3.update(a4);if(a4!=a5){r.trigger(a3.element,"change")}});var a0=".t-editor-toolbar > li > *";var a2=".t-editor-button .t-tool-icon:not(.t-state-disabled)";aZ.delegate(a2,"mouseenter",r.hover).delegate(a2,"mouseleave",r.leave).delegate(a2,"mousedown",r.preventDefault).delegate(a2,"click",r.stopAll(function(a4){a3.focus();a3.exec(aX(this))})).find(a0).each(function(){var a6=aX(this);var a5=a3.tools[a6];if(!a5){return}var a4=a1(a3.localization[a6],a5);a5.init(H(this),{title:a4,editor:a3})}).end().bind("selectionChange",function(){var a4=a3.getRange();a3.selectionRestorePoint=new aG(a4);var a5=f(a4);if(!a5.length){a5=[a4.startContainer]}aZ.find(a0).each(function(){var a6=a3.tools[aX(this)];if(a6){a6.update(H(this),a5)}})});H(this.document).bind("keyup",function(a5){var a4=[8,9,13,33,34,35,36,37,38,39,40,40,45,46];if(H.inArray(a5.keyCode,a4)>-1){aC(a3)}}).keydown(function(a5){var a4=a3.keyboard.toolFromShortcut(a3.tools,a5);if(a4){a5.preventDefault();a3.exec(a4);return false}a3.keyboard.clearTimeout();a3.keyboard.keydown(a5)}).keyup(function(a4){a3.keyboard.keyup(a4)}).mouseup(function(){aC(a3)});H(this.body).bind("cut paste",function(a4){a3.clipboard["on"+a4.type](a4)})};H.extend(r.editor,{Dom:aS,RestorePoint:aG,Marker:af,RangeUtils:z,RangeEnumerator:i,LinkFormatter:aE,LinkFormatFinder:ad,LinkCommand:at,UnlinkCommand:an,InlineFormatter:B,GreedyInlineFormatter:G,InlineFormatFinder:T,GreedyInlineFormatFinder:aP,BlockFormatter:e,GreedyBlockFormatter:x,BlockFormatFinder:aM,FormatCommand:aH,IndentFormatter:C,IndentCommand:v,OutdentCommand:X,ListFormatFinder:aN,ListFormatter:ay,ListCommand:aQ,ParagraphCommand:w,NewLineCommand:ag,ImageCommand:U,InsertHtmlCommand:aF,GenericCommand:aK,UndoRedoStack:Q,TypingHandler:ao,SystemHandler:P,Keyboard:aq,MSWordFormatCleaner:F});r.editor.prototype={value:function(aW){if(aW===undefined){return h(this.body)}aW=aW.replace(/<!\[CDATA\[(.*)?\]\]>/g,"<!--[CDATA[$1]]-->");aW=aW.replace(/<script([^>]*)>(.*)?<\/script>/ig,"<telerik:script $1>$2</telerik:script>");if(H.browser.msie){aW="<br/>"+aW;aW=aW.replace(/href\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,'originalhref="$1"');aW=aW.replace(/src\s*=\s*(?:'|")?([^'">\s]*)(?:'|")?/,'originalsrc="$1"');this.body.innerHTML=aW;aS.remove(this.body.firstChild);H("script,link,img,a",this.body).each(function(){if(this["originalhref"]){this.setAttribute("href",this["originalhref"]);this.removeAttribute("originalhref")}if(this["originalsrc"]){this.setAttribute("src",this["originalsrc"]);this.removeAttribute("originalsrc")}})}else{this.body.innerHTML=aW}this.update()},focus:function(){this.window.focus()},update:function(aW){this.textarea.value=aW||this.encoded?this.encodedValue():this.value()},encodedValue:function(){return aS.encode(this.value())},createRange:function(aW){return M(aW||this.document)},getSelection:function(){return aI(this.document)},selectRange:function(aW){var aX=this.getSelection();aX.removeAllRanges();aX.addRange(aW)},getRange:function(){var aW=this.getSelection();return aW.rangeCount>0?aW.getRangeAt(0):this.createRange()},selectedHtml:function(){return h(this.getRange().cloneContents())},paste:function(aW){this.clipboard.paste(aW)},exec:function(aX,aW){aX=aX.toLowerCase();var aY="";for(var a0 in this.tools){if(a0.toLowerCase()==aX){aY=this.tools[a0];break}}if(aY){var aZ=this.getRange();var a1=aY.command?aY.command(H.extend({range:aZ},aW)):null;r.trigger(this.element,"execute",{name:aX,command:a1});if(/undo|redo/i.test(aX)){this.undoRedoStack[aX]()}else{if(a1){if(!a1.managesUndoRedo){this.undoRedoStack.push(a1)}a1.editor=this;a1.exec();if(a1.async){a1.change=H.proxy(function(){aC(this)},this);return}}}aC(this)}}};H.fn.tEditor=function(aW){return r.create(this,{name:"tEditor",init:function(aX,aY){return new r.editor(aX,aY)},options:aW})};var ak={bold:[{tags:["strong"]},{tags:["span"],attr:{style:{fontWeight:"bold"}}}],italic:[{tags:["em"]},{tags:["span"],attr:{style:{fontStyle:"italic"}}}],underline:[{tags:["span"],attr:{style:{textDecoration:"underline"}}}],strikethrough:[{tags:["del"]},{tags:["span"],attr:{style:{textDecoration:"line-through"}}}],justifyLeft:[{tags:aD,attr:{style:{textAlign:"left"}}},{tags:["img"],attr:{style:{"float":"left"}}}],justifyCenter:[{tags:aD,attr:{style:{textAlign:"center"}}},{tags:["img"],attr:{style:{display:"block",marginLeft:"auto",marginRight:"auto"}}}],justifyRight:[{tags:aD,attr:{style:{textAlign:"right"}}},{tags:["img"],attr:{style:{"float":"right"}}}],justifyFull:[{tags:aD,attr:{style:{textAlign:"justify"}}}]};function aV(aW,aX){for(var aY=0;aY<aX.length;aY++){if(H.inArray(aW,aX[aY].tags)>=0){return aX[aY]}}}function O(aW){H.extend(this,aW);this.init=function(aX,aY){aX.attr({unselectable:"on",title:aY.title})};this.command=function(aX){return new aW.command(aX)};this.update=function(){}}O.exec=function(aY,aW,aX){aY.focus();if(aY.selectionRestorePoint){aY.selectRange(aY.selectionRestorePoint.toRange())}aY.exec(aW,{value:aX})};function av(aW){O.call(this,aW);this.command=function(aX){return new aH(H.extend(aX,{formatter:aW.formatter}))};this.update=function(aX,aY){aX.toggleClass("t-state-active",aW.finder.isFormatted(aY))}}var s=function(){return{isFormatted:function(){return false}}};H.fn.tEditor.defaults={localization:{bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",justifyCenter:"Center text",justifyLeft:"Align text left",justifyRight:"Align text right",justifyFull:"Justify",insertUnorderedList:"Insert unordered list",insertOrderedList:"Insert ordered list",indent:"Indent",outdent:"Outdent",createLink:"Insert hyperlink",unlink:"Remove hyperlink",insertImage:"Insert image",insertHtml:"Insert HTML",fontName:"Select font family",fontSize:"Select font size",formatBlock:"Format",style:"Styles"},formats:ak,encoded:true,stylesheets:[],dialogOptions:{modal:true,resizable:false,draggable:true,effects:{list:[{name:"toggle"}]}},fontName:[{Text:"inherit",Value:"inherit"},{Text:"Arial",Value:"Arial,Helvetica,sans-serif"},{Text:"Courier New",Value:"'Courier New',Courier,monospace"},{Text:"Georgia",Value:"Georgia,serif"},{Text:"Impact",Value:"Impact,Charcoal,sans-serif"},{Text:"Lucida Console",Value:"'Lucida Console',Monaco,monospace"},{Text:"Tahoma",Value:"Tahoma,Geneva,sans-serif"},{Text:"Times New Roman",Value:"'Times New Roman',Times,serif"},{Text:"Trebuchet MS",Value:"'Trebuchet MS',Helvetica,sans-serif"},{Text:"Verdana",Value:"Verdana,Geneva,sans-serif"}],fontSize:[{Text:"inherit",Value:"inherit"},{Text:"1 (8pt)",Value:"xx-small"},{Text:"2 (10pt)",Value:"x-small"},{Text:"3 (12pt)",Value:"small"},{Text:"4 (14pt)",Value:"medium"},{Text:"5 (18pt)",Value:"large"},{Text:"6 (24pt)",Value:"x-large"},{Text:"7 (36pt)",Value:"xx-large"}],formatBlock:[{Text:"Paragraph",Value:"p"},{Text:"Quotation",Value:"blockquote"},{Text:"Heading 1",Value:"h1"},{Text:"Heading 2",Value:"h2"},{Text:"Heading 3",Value:"h3"},{Text:"Heading 4",Value:"h4"},{Text:"Heading 5",Value:"h5"},{Text:"Heading 6",Value:"h6"}],tools:{bold:new aO({key:"B",ctrl:true,format:ak.bold}),italic:new aO({key:"I",ctrl:true,format:ak.italic}),underline:new aO({key:"U",ctrl:true,format:ak.underline}),strikethrough:new aO({format:ak.strikethrough}),undo:{key:"Z",ctrl:true},redo:{key:"Y",ctrl:true},insertLineBreak:new O({key:13,shift:true,command:ag}),insertParagraph:new O({key:13,command:w}),justifyCenter:new au({format:ak.justifyCenter}),justifyLeft:new au({format:ak.justifyLeft}),justifyRight:new au({format:ak.justifyRight}),justifyFull:new au({format:ak.justifyFull}),insertUnorderedList:new o({tag:"ul"}),insertOrderedList:new o({tag:"ol"}),createLink:new O({key:"K",ctrl:true,command:at}),unlink:new A({key:"K",ctrl:true,shift:true}),insertImage:new O({command:U}),indent:new O({command:v}),outdent:new Y(),insertHtml:new aA(),style:new aj(),fontName:new l({cssAttr:"font-family",domAttr:"fontFamily",name:"fontName"}),fontSize:new l({cssAttr:"font-size",domAttr:"fontSize",name:"fontSize"}),formatBlock:new N(),foreColor:new q({cssAttr:"color",domAttr:"color",name:"foreColor"}),backColor:new q({cssAttr:"background-color",domAttr:"backgroundColor",name:"backColor"})}}})(jQuery);