(function(b){var a=b.telerik;a.menu=function(e,f){this.element=e;this.nextItemZIndex=100;b.extend(this,f);b(".t-item:not(.t-state-disabled)",e).live("mouseenter",a.delegate(this,this.mouseenter),true).live("mouseleave",a.delegate(this,this.mouseleave),true).live("click",a.delegate(this,this.click));b(".t-item:not(.t-state-disabled) > .t-link",e).live("mouseenter",a.hover).live("mouseleave",a.leave);b(document).click(a.delegate(this,this.documentClick));a.bind(this,{select:this.onSelect,open:this.onOpen,close:this.onClose,load:this.onLoad})};function d(f){var e=f.parent();return{direction:e.hasClass("t-menu")?e.hasClass("t-menu-vertical")?"right":"bottom":"right"}}function c(f,g){try{return b.contains(f,g)}catch(h){return false}}a.menu.prototype={toggle:function(e,f){b(e).each(function(){b(this).toggleClass("t-state-default",f).toggleClass("t-state-disabled",!f)})},enable:function(e){this.toggle(e,true)},disable:function(e){this.toggle(e,false)},open:function(e){var f=this;b(e).each(function(){var g=b(this);clearTimeout(g.data("timer"));g.data("timer",setTimeout(function(){var h=g.find(".t-group:first");if(h.length){a.fx.play(f.effects,h,d(g));g.css("z-index",f.nextItemZIndex++)}},100))})},close:function(e){var f=this;b(e).each(function(i,h){var g=b(h);clearTimeout(g.data("timer"));g.data("timer",setTimeout(function(){var j=g.find(".t-group:first");if(j.length){a.fx.rewind(f.effects,j,d(g),function(){g.css("zIndex","");if(b(f.element).find(".t-group:visible").length==0){f.nextItemZIndex=100}});j.find(".t-group").stop(false,true)}},100))})},mouseenter:function(i,h){var f=b(h);if(!this.openOnClick||this.clicked){if(!c(h,i.relatedTarget)){this.triggerEvent("open",f);this.open(f);var g=f.parent().closest(".t-item")[0];if(g&&!c(g,i.relatedTarget)){this.mouseenter(i,g)}}}if(this.openOnClick&&this.clicked){this.triggerEvent("close",f);f.siblings().each(b.proxy(function(j,e){this.close(b(e))},this))}},mouseleave:function(i,h){if(!this.openOnClick&&!c(h,i.relatedTarget)){var f=b(h);this.triggerEvent("close",f);this.close(f);var g=f.parent().closest(".t-item")[0];if(g&&!c(g,i.relatedTarget)){this.mouseleave(i,g)}}},click:function(h,g){var f=b(g);a.trigger(this.element,"select",{item:f[0]});if(!f.parent().hasClass("t-menu")||!this.openOnClick){return}h.preventDefault();this.clicked=true;this.triggerEvent("open",f);this.open(f)},documentClick:function(g,f){if(b.contains(this.element,g.target)){return}if(this.clicked){this.clicked=false;b(this.element).children(".t-item").each(b.proxy(function(e,h){this.close(b(h))},this))}},hasChildren:function(e){return e.find(".t-group:first").length},triggerEvent:function(f,e){if(this.hasChildren(e)){a.trigger(this.element,f,{item:e[0]})}}};b.fn.tMenu=function(e){return a.create(this,{name:"tMenu",init:function(f,g){return new a.menu(f,g)},options:e})};b.fn.tMenu.defaults={orientation:"horizontal",effects:a.fx.slide.defaults(),openOnClick:false}})(jQuery);