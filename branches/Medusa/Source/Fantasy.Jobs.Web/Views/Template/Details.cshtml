@model Fantasy.Jobs.JobTemplate 
@using System.Xml.Linq          
@{
    ViewBag.Title = String.Format("{0} - Template - Fantasy Job Service",
        !String.IsNullOrEmpty(Model.Name) ? Model.Name : Path.GetFileName(Model.Location));
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@functions
{
    string FormatXml(string xml)
    {
        XElement element = XElement.Parse(xml);
        System.Xml.XmlWriterSettings settings = new System.Xml.XmlWriterSettings()
        {
            Indent = true,
            IndentChars = "    ",
            NewLineOnAttributes = true,
        };
        MemoryStream stream = new MemoryStream();
        System.Xml.XmlWriter writer = System.Xml.XmlWriter.Create(stream, settings);
        element.WriteTo(writer);
        writer.Close();
        stream.Seek(0, SeekOrigin.Begin);
        StreamReader reader = new StreamReader(stream);
        string rs = reader.ReadToEnd();
        return rs;
    }

}
@section head{
    <script src="@Url.Content("~/Scripts/sh/shcore.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/sh/shBrushXml.js")" type="text/javascript"></script>
    <link rel="Stylesheet" type="text/css" href="@Url.Content("~/Content/sh/shCore.css")" />
    <link rel="Stylesheet" type="text/css" href="@Url.Content("~/Content/sh/shThemeRDark.css")" />
}
<img alt="@Model.Valid" src="@Url.Content(string.Format("~/Content/images/template/{0}.png", Model.Valid ? "tick" : "cross"))" style="width:32px;height:32px" /><h2>@(!String.IsNullOrEmpty(Model.Name) ? Model.Name : Path.GetFileName(Model.Location)) - Template - Fantasy Job Service</h2>
<ul>
   <li>Name:&nbsp;@(!String.IsNullOrEmpty(Model.Name) ? Model.Name : "(Anonymity)")</li>
   <li>Localtion:&nbsp;@this.Model.Location</li>
</ul>

<div class="script-container">
    <pre class="brush: xml;toolbar: false" >@FormatXml(this.Model.Content)</pre>
</div>

<script type="text/javascript">
    $(document).ready(function ()
    {
        SyntaxHighlighter.all();
    });
</script>
